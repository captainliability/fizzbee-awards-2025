<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fizzbee Awards 2025 ‚Äì Voting Progress</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
<style>
:root{--orange:#FF8A00;--champagne:#F7E6B5;--navy:#0E2A47;--cream:#FFF9EC;}
body{margin:0;font-family:Nunito;background:var(--cream);color:#203040}
header{background:linear-gradient(135deg,var(--champagne),#fff);border-bottom:6px solid var(--orange)}
.wrap{max-width:900px;margin:0 auto;padding:20px}
.brand{display:flex;align-items:center;gap:16px}
.brand img.logo{width:110px;height:110px;object-fit:contain;background:#fff;border-radius:999px;padding:10px;border:3px solid #fff;box-shadow:0 8px 22px rgba(0,0,0,.15)}
h1{margin:0;font-weight:800}
.subtitle{margin-top:4px;color:#30465a}
.hero{margin-top:14px;border-radius:18px;overflow:hidden;box-shadow:0 8px 28px rgba(0,0,0,.08);border:3px solid #fff}
.hero img{width:100%;display:block}
.card{background:#fff;border-radius:18px;padding:18px;box-shadow:0 8px 28px rgba(0,0,0,.08);border:1px solid #eee;margin-top:18px}
h2{margin-top:0;color:var(--navy)}
ul{list-style:none;padding:0;margin:0}
li{padding:6px 0;border-bottom:1px solid #eee}
button{background:var(--orange);color:#fff;font-weight:700;border:none;border-radius:12px;padding:10px 16px;cursor:pointer;box-shadow:0 6px 18px rgba(255,138,0,.25)}
.footer{text-align:center;margin:32px 0 48px;color:#4a5a6a;font-size:.9rem}
.progress{height:16px;background:#eee;border-radius:8px;overflow:hidden;margin-bottom:12px}
.bar{height:100%;background:var(--orange);width:0;transition:width .5s}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="brand">
      <img class="logo" src="logo.png" alt="8D Fizz logo">
      <div>
        <h1>Fizzbee Awards 2025</h1>
        <div class="subtitle">Voting Progress Tracker üçæ</div>
      </div>
    </div>
    <div class="hero"><img src="team.png" alt="8D Fizz team photo"></div>
  </div>
</header>

<main class="wrap">
  <div class="card">
    <h2>Voting Summary</h2>
    <div class="progress"><div id="bar" class="bar"></div></div>
    <p><strong>Total team:</strong> <span id="total">‚Äì</span><br>
       <strong>Voted:</strong> <span id="count-voted">‚Äì</span><br>
       <strong>Still to vote:</strong> <span id="count-tovote">‚Äì</span></p>

    <div style="display:flex;gap:30px;flex-wrap:wrap">
      <div style="flex:1;min-width:250px">
        <h3>‚úÖ Voted</h3>
        <ul id="voted"></ul>
      </div>
      <div style="flex:1;min-width:250px">
        <h3>üïì Still to vote</h3>
        <ul id="tovote"></ul>
      </div>
    </div>
  </div>

  <div style="text-align:center;margin-top:24px">
    <a href="index.html"><button>Go Vote</button></a>
  </div>
</main>

<footer class="wrap footer">¬© 2025 8D Fizz Ultimate Frisbee ‚Ä¢ Fizzbee Awards</footer>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx3GeUFPQ15_UuxUjbV-M9n4HtIza-HMtBqpMF-s6YyIGYdxgyIwqf0eGiiNGfWef_v/exec?action=getResults";

const TEAM = [
  "Bryan","Christel","David","Dee","Emma","Katharine","Kyla","Philip",
  "Andrea","Cat","Josh","Neil","Rachel","Rick","Scott","Thomas","Victoria","Matt"
];

fetch(SCRIPT_URL)
  .then(r=>r.json())
  .then(data=>{
    const voters = new Set();
    // Parse through all categories to gather all unique voter names
    for (const [cat, info] of Object.entries(data)) {
      if (!info || !info.votes) continue;
      info.votes.forEach(([name,count])=>{
        // we only care that name exists, don't care about count
        if (name && name !== 'Skip') voters.add(name);
      });
    }
    updateLists([...voters]);
  })
  .catch(err=>{
    console.error(err);
    document.getElementById('voted').innerHTML = '<li>Error loading results</li>';
  });

function updateLists(voters){
  const votedSet = new Set(voters);
  const voted = TEAM.filter(n=>votedSet.has(n));
  const notYet = TEAM.filter(n=>!votedSet.has(n));
  document.getElementById('total').textContent = TEAM.length;
  document.getElementById('count-voted').textContent = voted.length;
  document.getElementById('count-tovote').textContent = notYet.length;
  document.getElementById('voted').innerHTML = voted.map(n=>`<li>${n}</li>`).join('');
  document.getElementById('tovote').innerHTML = notYet.map(n=>`<li>${n}</li>`).join('');
  const percent = Math.round((voted.length/TEAM.length)*100);
  document.getElementById('bar').style.width = percent+'%';
}
</script>
</body>
</html>
